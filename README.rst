.. |br| raw:: html

   <br />
   
This is the main edX platform which consists of LMS and Studio.
_______________________________________________________________

|

Installation
============

|

1. Install Open edX Cypress From this link given below:
#######################################################

+----------------------------------------------------------------------------------------------------+
|https://openedx.atlassian.net/wiki/display/OpenOPS/Native+Open+edX+Ubuntu+12.04+64+bit+Installation |
+----------------------------------------------------------------------------------------------------+

|

2. Cypress - IITBombayX
#######################

* **Run commands below to clone edx-platform from github**
+----------------------------------------------------------------------------------------------------+
|cd /edx/app/edxapp                                                                                  |
|                                                                                                    |
|sudo mv  edx-platform edx-platform-old                                                              |
|                                                                                                    |
|sudo -H -S -u edxapp /bin/sh -c "git clone https://github.com/openiitbombayx/edx-platform.git"      |
+----------------------------------------------------------------------------------------------------+

|

* **Run command below to make directory and clone theme from github**
+-----------------------------------------------------------------------------------------------------+
|cd /edx/app/edxapp                                                                                   |
|                                                                                                     |
|sudo -H -S -u edxapp /bin/sh -c "mkdir themes"                                                       |
|                                                                                                     |
|cd /edx/app/edxapp/themes                                                                            |
|                                                                                                     |
|sudo -H -S -u edxapp /bin/sh -c "git clone https://github.com/openiitbombayx/iitbxcypress-theme.git" |      
+-----------------------------------------------------------------------------------------------------+

|

* **Edit lms.env.json, cms.env.json both and change values below:**
+-----------------------------------------------+
|sudo vi /edx/app/edxapp/lms.env.json           |
+-----------------------------------------------+
"USE_CUSTOM_THEME": true |br| "THEME_NAME": "iitbxcypress-theme", |br| "PLATFORM_NAME": "IITBombayX",

|

+-----------------------------------------------+
|sudo vi /edx/app/edxapp/cms.env.json           |
+-----------------------------------------------+
"USE_CUSTOM_THEME": true |br| "THEME_NAME": "iitbxcypress-theme", |br| "PLATFORM_NAME": "IITBombayX",

|

* **cd /edx/app/edxapp/edx-platform**

+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|sudo -H -S -u edxapp /bin/sh -c "HOME=/edx/app/edxapp RBENV_ROOT=/edx/app/edxapp/.rbenv GEM_HOME=/edx/app/edxapp/.gem PATH=/edx/app/edxapp/venvs/edxapp/bin:/edx/app/edxapp/edx-platform/bin:/edx/app/edxapp/.rbenv/bin:/edx/app/edxapp/.rbenv/shims:/edx/app/edxapp/.gem/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin NO_PREREQ_INSTALL=1 GEM_PATH=/edx/app/edxapp/.gem SKIP_WS_MIGRATIONS=1 LANG=en_US.UTF-8 gem install bundle"   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|

+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|sudo -H -S -u edxapp /bin/sh -c "HOME=/edx/app/edxapp RBENV_ROOT=/edx/app/edxapp/.rbenv GEM_HOME=/edx/app/edxapp/.gem PATH=/edx/app/edxapp/venvs/edxapp/bin:/edx/app/edxapp/edx-platform/bin:/edx/app/edxapp/.rbenv/bin:/edx/app/edxapp/.rbenv/shims:/edx/app/edxapp/.gem/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin NO_PREREQ_INSTALL=1 GEM_PATH=/edx/app/edxapp/.gem SKIP_WS_MIGRATIONS=1 LANG=en_US.UTF-8 bundle install --binstubs"    |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|

+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|sudo -H -S -u edxapp /bin/sh -c "HOME=/edx/app/edxapp RBENV_ROOT=/edx/app/edxapp/.rbenv GEM_HOME=/edx/app/edxapp/.gem PATH=/edx/app/edxapp/venvs/edxapp/bin:/edx/app/edxapp/edx-platform/bin:/edx/app/edxapp/.rbenv/bin:/edx/app/edxapp/.rbenv/shims:/edx/app/edxapp/.gem/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin NO_PREREQ_INSTALL=1 GEM_PATH=/edx/app/edxapp/.gem SKIP_WS_MIGRATIONS=1 LANG=en_US.UTF-8 npm install"                  |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|

+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|sudo -H -S -u edxapp /bin/sh -c "HOME=/edx/app/edxapp RBENV_ROOT=/edx/app/edxapp/.rbenv GEM_HOME=/edx/app/edxapp/.gem PATH=/edx/app/edxapp/venvs/edxapp/bin:/edx/app/edxapp/edx-platform/bin:/edx/app/edxapp/.rbenv/bin:/edx/app/edxapp/.rbenv/shims:/edx/app/edxapp/.gem/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin NO_PREREQ_INSTALL=1 GEM_PATH=/edx/app/edxapp/.gem SKIP_WS_MIGRATIONS=1 LANG=en_US.UTF-8 /edx/app/edxapp/venvs/edxapp/bin/pip install -i https://pypi.python.org/simple --exists-action w --use-mirrors -r /edx/app/edxapp/edx-platform/requirements/edx/pre.txt"        |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|

+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|sudo -H -S -u edxapp /bin/sh -c "HOME=/edx/app/edxapp RBENV_ROOT=/edx/app/edxapp/.rbenv GEM_HOME=/edx/app/edxapp/.gem PATH=/edx/app/edxapp/venvs/edxapp/bin:/edx/app/edxapp/edx-platform/bin:/edx/app/edxapp/.rbenv/bin:/edx/app/edxapp/.rbenv/shims:/edx/app/edxapp/.gem/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin NO_PREREQ_INSTALL=1 GEM_PATH=/edx/app/edxapp/.gem SKIP_WS_MIGRATIONS=1 LANG=en_US.UTF-8 /edx/app/edxapp/venvs/edxapp/bin/pip install -i https://pypi.python.org/simple --exists-action w --use-mirrors -r /edx/app/edxapp/edx-platform/requirements/edx/base.txt"       |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|

+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|sudo -H -S -u edxapp /bin/sh -c "HOME=/edx/app/edxapp RBENV_ROOT=/edx/app/edxapp/.rbenv GEM_HOME=/edx/app/edxapp/.gem PATH=/edx/app/edxapp/venvs/edxapp/bin:/edx/app/edxapp/edx-platform/bin:/edx/app/edxapp/.rbenv/bin:/edx/app/edxapp/.rbenv/shims:/edx/app/edxapp/.gem/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin NO_PREREQ_INSTALL=1 GEM_PATH=/edx/app/edxapp/.gem SKIP_WS_MIGRATIONS=1 LANG=en_US.UTF-8 /edx/app/edxapp/venvs/edxapp/bin/pip install -i https://pypi.python.org/simple --exists-action w --use-mirrors -r /edx/app/edxapp/edx-platform/requirements/edx/local.txt"      |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|

+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|sudo -H -S -u edxapp /bin/sh -c "HOME=/edx/app/edxapp RBENV_ROOT=/edx/app/edxapp/.rbenv GEM_HOME=/edx/app/edxapp/.gem PATH=/edx/app/edxapp/venvs/edxapp/bin:/edx/app/edxapp/edx-platform/bin:/edx/app/edxapp/.rbenv/bin:/edx/app/edxapp/.rbenv/shims:/edx/app/edxapp/.gem/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin NO_PREREQ_INSTALL=1 GEM_PATH=/edx/app/edxapp/.gem SKIP_WS_MIGRATIONS=1 LANG=en_US.UTF-8 /edx/app/edxapp/venvs/edxapp/bin/pip install -i https://pypi.python.org/simple --exists-action w --use-mirrors -r /edx/app/edxapp/edx-platform/requirements/edx/github.txt"     |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|

+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|sudo -H -S -u edxapp /bin/sh -c "HOME=/edx/app/edxapp RBENV_ROOT=/edx/app/edxapp/.rbenv GEM_HOME=/edx/app/edxapp/.gem PATH=/edx/app/edxapp/venvs/edxapp/bin:/edx/app/edxapp/edx-platform/bin:/edx/app/edxapp/.rbenv/bin:/edx/app/edxapp/.rbenv/shims:/edx/app/edxapp/.gem/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin NO_PREREQ_INSTALL=1 GEM_PATH=/edx/app/edxapp/.gem SKIP_WS_MIGRATIONS=1 LANG=en_US.UTF-8 /edx/app/edxapp/venvs/edxapp/bin/pip install -i https://pypi.python.org/simple --exists-action w --use-mirrors -r /edx/app/edxapp/edx-platform/requirements/edx/post.txt"       |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|

+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|sudo -H -S -u edxapp /bin/sh -c "HOME=/edx/app/edxapp RBENV_ROOT=/edx/app/edxapp/.rbenv GEM_HOME=/edx/app/edxapp/.gem PATH=/edx/app/edxapp/venvs/edxapp/bin:/edx/app/edxapp/edx-platform/bin:/edx/app/edxapp/.rbenv/bin:/edx/app/edxapp/.rbenv/shims:/edx/app/edxapp/.gem/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin NO_PREREQ_INSTALL=1 GEM_PATH=/edx/app/edxapp/.gem SKIP_WS_MIGRATIONS=1 LANG=en_US.UTF-8 /edx/app/edxapp/venvs/edxapp/bin/pip install -i https://pypi.python.org/simple --exists-action w --use-mirrors -r /edx/app/edxapp/edx-platform/requirements/edx/paver.txt"      |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|

* **First time paver LMS and CMS**
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|sudo -H -S -u edxapp /bin/sh -c "HOME=/edx/app/edxapp RBENV_ROOT=/edx/app/edxapp/.rbenv GEM_HOME=/edx/app/edxapp/.gem PATH=/edx/app/edxapp/venvs/edxapp/bin:/edx/app/edxapp/edx-platform/bin:/edx/app/edxapp/.rbenv/bin:/edx/app/edxapp/.rbenv/shims:/edx/app/edxapp/.gem/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin NO_PREREQ_INSTALL=1 GEM_PATH=/edx/app/edxapp/.gem SKIP_WS_MIGRATIONS=1 LANG=en_US.UTF-8 SERVICE_VARIANT=lms paver update_assets lms --settings=aws"     |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|

+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|sudo -H -S -u edxapp /bin/sh -c "HOME=/edx/app/edxapp RBENV_ROOT=/edx/app/edxapp/.rbenv GEM_HOME=/edx/app/edxapp/.gem PATH=/edx/app/edxapp/venvs/edxapp/bin:/edx/app/edxapp/edx-platform/bin:/edx/app/edxapp/.rbenv/bin:/edx/app/edxapp/.rbenv/shims:/edx/app/edxapp/.gem/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin NO_PREREQ_INSTALL=1 GEM_PATH=/edx/app/edxapp/.gem SKIP_WS_MIGRATIONS=1 LANG=en_US.UTF-8 SERVICE_VARIANT=cms paver update_assets cms --settings=aws"     |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|

* **Add the following variables in /edx/app/edxapp/lms.env.json file.**
**If it is already present, just change the values. OR the lines should be added before: "ANALYTICS_SERVER_URL": "",** 

+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|"ADVANCED_SECURITY_CONFIG": { |br| "MIN_DIFFERENT_STAFF_PASSWORDS_BEFORE_REUSE":1, |br| "MIN_DIFFERENT_STUDENT_PASSWORDS_BEFORE_REUSE":1 |br| }, |br| "ADVANCED_SECURITY": true, |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|

* **Inside the "FEATURES" dictionary of lms.env.json file, there is an entry called ENFORCE_PASSWORD_POLICY. Change it as follows if not add this:**
+---------------------------------+
|"ENFORCE_PASSWORD_POLICY": true, |
+---------------------------------+

|

* **There is a dictionary called "REGISTRATION_EXTRA_FIELDS" in /edx/app/edxapp/lms.env.json file. Delete the entire dictionary.**
**eg. if the dictionary is as follows:**

+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| REGISTRATION_EXTRA_FIELDS = { |br| 'state':'required', |br| 'city': 'required', |br| 'pincode': 'required', |br| 'aadhar_id':'optional', |br| 'level_of_education': 'optional', |br| 'gender': 'optional', |br| 'year_of_birth': 'optional', |br| 'mailing_address': 'optional', |br| 'goals': 'optional', |br| 'honor_code': 'required', |br| 'terms_of_service': 'hidden', |br| 'country': 'hidden', |br| } |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|
**delete the entire text above. (If not deleted this State and City will not comes While REGITER User Account)**

|

* **Edit cms.env.json**
+-----------------------------------------+
|sudo vi /edx/app/edxapp/cms.env.json     |
+-----------------------------------------+

|

* **Restart LMS and CMS**

+-------------------------------------------------------------+
|sudo /edx/bin/supervisorctl restart edxapp:                  |
+-------------------------------------------------------------+

|

* **Use this step if not migrated earlier**
+---------------------------------------------------------------------------------------------------+
|sudo -u www-data /edx/bin/python.edxapp ./manage.py lms migrate student --settings aws             |
|                                                                                                   |
|sudo -u www-data /edx/bin/python.edxapp ./manage.py lms migrate courseware --settings aws          |
+---------------------------------------------------------------------------------------------------+
